#!/bin/ksh
#
# Script to keep source trees up to date. Run from cron.

set -e

SLEEP=$1

# Don't sleep if we get -n
if [[ $SLEEP != '-n' ]]; then
	SPLAY=$(($RANDOM % 1800))
	sleep $SPLAY
else
	echo "Updating src trees"
fi

(cd /usr/src && cvs -q up -P)
(cd /usr/ports && cvs -q up -P)
